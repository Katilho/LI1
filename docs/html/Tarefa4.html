<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa4</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Tarefa4</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>O objetivo desta tarefa foi calcular o efeito da passagem de um instante de tempo num estado do jogo. 
A princ&#237;pio esta tarefa pareceu assustadora, uma vez que introduz o conceito de passagem de tempo, mas com a ajuda do professor e alguma discuss&#227;o entre colegas, conseguimos desenvolver estrat&#233;gias para come&#231;armos a fazer a tarefa.</p><h1>Objetivos</h1><p>Nesta tarefa, foi usada uma unidade temporal de 250 ms por itera&#231;&#227;o. Usamos uma fun&#231;&#227;o que, dado um State e uma lista de Players, vai determinar a melhor jogada a ser efetuada para todos os players, analisando esse mesmo State.</p><p>Inicialmente criamos uma fun&#231;&#227;o que s&#243; fazia com que todos os Players do State andassem para a direita, como sugest&#227;o do professor.
Mais tarde, ap&#243;s a conclus&#227;o da Tarefa 5, melhoramos essa fun&#231;&#227;o implementando a obrigatoriedade de fazer o conjunto de jogadas que foram determinadas na Tarefa5 e fazer andar o Pacman na dire&#231;&#227;o que ele tinha, sendo essa dire&#231;&#227;o alterada pelas setas do teclado atrav&#233;s da fun&#231;&#227;o updateControlledPlayer da Main.</p><p>Para que os fantasmas que estivessem no estado Dead andassem a metade da velocidade do Pacman, fizemos uma fun&#231;&#227;o em que quando o Step (n&#250;mero de itera&#231;&#245;es que o jogo j&#225; passou) &#233; par, s&#243; jogam os Players que n&#227;o s&#227;o Dead Ghosts.
Os restantes Players n&#227;o s&#227;o afetados por essa restri&#231;&#227;o, tendo assim, o conceito de velocidade, sido implementado da maneira que se o Player for um Ghost Dead s&#243; jogar&#225; de 500 ms em 500 ms, enquanto que os outros jogam de 250 ms em 250 ms (DefaultDelayTime).
De seguida, para que haja a redu&#231;&#227;o do TimeMega de um Pacman, foi introduzida uma fun&#231;&#227;o que a cada 4 itera&#231;&#245;es passadas reduziria em 1 o TimeMega, ou seja a cada segundo que passava era reduzido em 1 o valor do TimeMega dum Pacman Mega.
Consequente a essa redu&#231;&#227;o de timeMega, alteramos certos aspetos da Tarefa2, modificando e criando novas fun&#231;&#245;es que faria um Pacman no estado Mega e com MegaTime 0, voltar ao normal, e sem nenhum Pacman em modo Mega, transformar-se-iam de volta todos os fantasmas Dead, em Alive.</p><p>Para podermos verificar o bot da Tarefa 6, criamos a fun&#231;&#227;o jogaListab que, tal como na jogaLista (original), recebe as jogadas dos Ghosts para atualizar o State, mas o Pacman &#233; controlado pelo bot da Tarefa 6 e n&#227;o pelos inputs que realizamos atrav&#233;s das setas do teclado.
Atualmente a fun&#231;&#227;o passTime est&#225; configurada para que o Pacman n&#227;o seja controlado pelo bot, mas sim pelas setas do teclado.</p><p>Por fim, com todas estas novas fun&#231;&#245;es em considera&#231;&#227;o a fun&#231;&#227;o final passTime foi criada, sendo assim concretizado o objetivo de calcular o efeito de passagem do tempo num State.</p><h1>Discuss&#227;o e conclus&#227;o</h1><p>Nesta tarefa foi atingido o seu principal objetivo, podendo ser verificada a passagem do tempo no mapa e nos jogadores atrav&#233;s das fun&#231;&#245;es criadas, havendo atualiza&#231;&#227;o do estado de jogo a cada itera&#231;&#227;o.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:defaultDelayTime">defaultDelayTime</a> :: Integer</li><li class="src short"><a href="#v:jogaLista">jogaLista</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:plays">plays</a> :: [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:arentDGhost">arentDGhost</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:passTimeAux">passTimeAux</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:reduceMegaSec">reduceMegaSec</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:reduceMega">reduceMega</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:quadruplo">quadruplo</a> :: Int -&gt; Bool</li><li class="src short"><a href="#v:passTime">passTime</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:jogaListab">jogaListab</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:transPlay">transPlay</a> :: Maybe <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:defaultDelayTime" class="def">defaultDelayTime</a> :: Integer <a href="#v:defaultDelayTime" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:jogaLista" class="def">jogaLista</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:jogaLista" class="selflink">#</a></p><div class="doc"><p>Dado uma lista de Players e um State, vai fazer um play para todos os jogadores utilizando as fun&#231;&#245;es da seguinte tarefa, que analisam o State e determinam a melhor jogada a efetuar por parte dos players fantasmas, e para o Pacman, faz com que ele se mova no sentido da sua orienta&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:plays" class="def">plays</a> :: [<a href="Types.html#t:Play" title="Types">Play</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:plays" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que dado um conjunto de Plays e um State, aplica todas as Plays ao State.</p></div></div><div class="top"><p class="src"><a id="v:arentDGhost" class="def">arentDGhost</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:arentDGhost" class="selflink">#</a></p><div class="doc"><p>Dado uma lista de Players, retorna uma lista de Players, sem os Ghosts Dead.</p></div></div><div class="top"><p class="src"><a id="v:passTimeAux" class="def">passTimeAux</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTimeAux" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que faz os players com metade da velocidade, fazerem uma jogada a cada duas itera&#231;&#245;es.</p></div></div><div class="top"><p class="src"><a id="v:reduceMegaSec" class="def">reduceMegaSec</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:reduceMegaSec" class="selflink">#</a></p><div class="doc"><p>Dado uma lista de players devolve um lista de players com a redu&#231;&#227;o em 1 segundo da dura&#231;&#227;o do TimeMega, de todos os Pacmans que est&#227;o no estado Mega.</p></div></div><div class="top"><p class="src"><a id="v:reduceMega" class="def">reduceMega</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:reduceMega" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que aplica na lista de jogadores de um <em>State</em>, a fun&#231;&#227;o anterior que reduz em um segundo a dura&#231;&#227;o do TimeMega dos Pacman Mega.</p></div></div><div class="top"><p class="src"><a id="v:quadruplo" class="def">quadruplo</a> :: Int -&gt; Bool <a href="#v:quadruplo" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o que diz se um n&#250;mero &#233; multiplo de 4, utilizada para detetar a passagem de 1 segundo (=250*4 ms).</p></div></div><div class="top"><p class="src"><a id="v:passTime" class="def">passTime</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:passTime" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o final que aplica a passagem de tempo.</p></div></div><div class="top"><p class="src"><a id="v:jogaListab" class="def">jogaListab</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:jogaListab" class="selflink">#</a></p><div class="doc"><p>Fun&#231;&#227;o utilizada para testar o bot da Tarefa 6, dando as jogadas dos fantasmas da Tarefa 5, mas com o Pacman a ser controlado pelo bot da Tarefa 6 </p></div></div><div class="top"><p class="src"><a id="v:transPlay" class="def">transPlay</a> :: Maybe <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:transPlay" class="selflink">#</a></p><div class="doc"><p>Transforma um Maybe Play num Play.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>